"use strict";function e(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function t(t){return function(){var r=this,n=arguments;return new Promise(function(o,a){var i=t.apply(r,n);function l(t){e(i,o,a,l,s,"next",t)}function s(t){e(i,o,a,l,s,"throw",t)}l(void 0)})}}function r(e,t,r){return function(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}(e,t),!function(e,t){if(void 0===e)throw TypeError("attempted to get private static field before its declaration")}(r,0),r.get?r.get.call(e):r.value}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return a}});var a=/*#__PURE__*/function(){"use strict";var e;function a(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a),n(this,"platform","web")}return e=[{key:"getLocalStorageEnabled",value:function(){var e=!1;try{e=window.localStorage&&!0}catch(t){e=!1}return e}},{key:"setAllLocalStorage",value:function(e,n){var l=this;return t(function(){var t;return o(this,function(o){return l.getLocalStorageEnabled()?(t=JSON.stringify(n),localStorage.setItem(r(a,a,i)+e,t)):console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2]})})()}},{key:"setLocalStorage",value:function(e,l,s){var u=this;return t(function(){var t,c;return o(this,function(o){switch(o.label){case 0:if(!u.getLocalStorageEnabled())return console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2];return[4,u.getAllLocalStorage(e)];case 1:if(t=o.sent())return t[l]=s,localStorage.setItem(r(a,a,i)+e,JSON.stringify(t)),[2];return c=n({},l,s),localStorage.setItem(r(a,a,i)+e,JSON.stringify(c)),[2]}})})()}},{key:"getLocalStorage",value:function(e,r){var n=this;return t(function(){var t;return o(this,function(o){switch(o.label){case 0:if(!n.getLocalStorageEnabled())return console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2];return[4,n.getAllLocalStorage(e)];case 1:t=o.sent();try{if(t)return[2,JSON.parse(t[r])]}catch(e){if(t)return[2,t[r]]}return[2]}})})()}},{key:"getAllLocalStorage",value:function(e){var n=this;return t(function(){var t;return o(this,function(o){if(!n.getLocalStorageEnabled())return console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2];try{return t=localStorage.getItem(r(a,a,i)+e)?JSON.parse(localStorage.getItem(r(a,a,i)+e)):void 0,[2,t]}catch(e){return[2,void 0]}return[2]})})()}},{key:"clearLocalStorage",value:function(e,n){var l=this;return t(function(){var t;return o(this,function(o){switch(o.label){case 0:if(!l.getLocalStorageEnabled())return console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2];return[4,l.getLocalStorage(e,n)];case 1:if(!o.sent())return[3,3];return[4,l.getAllLocalStorage(e)];case 2:if(!(t=o.sent()))return[2];delete t[n],localStorage.setItem(r(a,a,i)+e,JSON.stringify(t)),o.label=3;case 3:return[2]}})})()}},{key:"clearAllLocalStorage",value:function(e){var n=this;return t(function(){return o(this,function(t){return n.getLocalStorageEnabled()?localStorage.removeItem(r(a,a,i)+e):console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2]})})()}},{key:"setLoginUserLocalStorage",value:function(e,r,n){var a=this;return t(function(){var t;return o(this,function(o){return a.getLocalStorageEnabled()?((t={})["firebase:wepin"]=Object.assign({provider:null==r?void 0:r.provider},null==r?void 0:r.token),t["wepin:connectUser"]={accessToken:n.token.access,refreshToken:n.token.refresh},t.user_id=n.userInfo.userId,t.user_info={status:"success",userInfo:{userId:n.userInfo.userId,email:n.userInfo.email,provider:r.provider,use2FA:n.userInfo.use2FA>=2}},t.user_status={loginStatus:n.loginStatus,pinRequired:"registerRequired"===n.loginStatus&&n.pinRequired},"pinRequired"!==n.loginStatus&&n.walletId&&(t.wallet_id=n.walletId,t.user_info.walletId=n.walletId),t.oauth_provider_pending=r.provider,a.setAllLocalStorage(e,t),[2,{userInfo:t.user_info,connectUser:t["wepin:connectUser"]}]):(console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2])})})()}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(a.prototype,e),a}(),i={writable:!0,value:"wepin:auth:"};